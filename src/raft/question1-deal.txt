000004 T0000 VOTE S0 -> become Candidate
Test (PartB): agreement after follower reconnects ...
000005 T0000 VOTE S1 -> become Candidate
000006 T0000 VOTE S2 -> become Candidate
000007 T0001 VOTE S2 -> S1, Reject vote, Already vote to S2
000008 T0001 VOTE S2 -> S0, Reject vote, Already vote to S2
000009 T0001 VOTE S1 -> S0, Reject vote, Already vote to S1
000009 T0001 VOTE S0 -> S2, Reject vote, Already vote to S0
000009 T0001 VOTE S0 -> S1, Reject vote, Already vote to S0
000009 T0001 VOTE S1 -> S2, Reject vote, Already vote to S1
001322 T0001 VOTE S0 -> become Candidate
001324 T0001 LOG1 S2 Candidate->Follower, For T1->T2
001325 T0002 VOTE S2 -> S0, Vote granted
001325 T0001 LOG1 S1 Candidate->Follower, For T1->T2
001325 T0002 VOTE S1 -> S0, Vote granted
001326 T0002 LOG1 S0 become Leader T2
001326 T0002 VOTE S0 Lost Context, abort voteRequest from S2
001329 T0002 LOG1 S2 Follower->Follower, For T2->T2
001329 T0002 LOG2 S2 <- S0, append (0, 0]
001330 T0002 LOG1 S1 Follower->Follower, For T2->T2
001330 T0002 LOG2 S1 <- S0, append (0, 0]
001330 T0002 DBUG S0 Match after sort: [0 0 0], majority[1]=0
001331 T0002 DBUG S0 Match after sort: [0 0 0], majority[1]=0
001549 T0002 LEAD S0 Leader accept log [1]T2
003343 T0002 LOG1 S1 Follower->Follower, For T2->T2
003344 T0002 LOG2 S1 <- S0, append (0, 1]
003344 T0002 LOG1 S2 Follower->Follower, For T2->T2
003344 T0002 LOG2 S2 <- S0, append (0, 1]
003344 T0002 DBUG S0 Match after sort: [0 1 1], majority[1]=1
003344 T0002 APLY S0 Leader update the commit 0->1
003345 T0002 DBUG S0 Match after sort: [1 1 1], majority[1]=1
003345 T0002 APLY S0 Apply log for [1, 1]
005348 T0002 LOG1 S1 Follower->Follower, For T2->T2
005348 T0002 LOG2 S1 <- S0, append (1, 1]
005349 T0002 APLY S1 Follower accept log: (0,1]
005348 T0002 LOG1 S2 Follower->Follower, For T2->T2
005349 T0002 LOG2 S2 <- S0, append (1, 1]
005349 T0002 APLY S2 Follower accept log: (0,1]
005349 T0002 DBUG S0 Match after sort: [1 1 1], majority[1]=1
005349 T0002 APLY S1 Apply log for [1, 1]
005349 T0002 APLY S2 Apply log for [1, 1]
005349 T0002 DBUG S0 Match after sort: [1 1 1], majority[1]=1
007364 T0002 LOG1 S2 Follower->Follower, For T2->T2
007364 T0002 LOG2 S2 <- S0, append (1, 1]
007365 T0002 LOG1 S1 Follower->Follower, For T2->T2
007365 T0002 LOG2 S1 <- S0, append (1, 1]
007365 T0002 DBUG S0 Match after sort: [1 1 1], majority[1]=1
007366 T0002 DBUG S0 Match after sort: [1 1 1], majority[1]=1
009365 T0002 LOG1 S2 Follower->Follower, For T2->T2
009365 T0002 LOG2 S2 <- S0, append (1, 1]
009365 T0002 LOG1 S1 Follower->Follower, For T2->T2
009365 T0002 LOG2 S1 <- S0, append (1, 1]
009366 T0002 DBUG S0 Match after sort: [1 1 1], majority[1]=1
009366 T0002 DBUG S0 Match after sort: [1 1 1], majority[1]=1
010968 T0002 LEAD S0 Leader accept log [2]T2
011369 T0002 LOG1 S2 Follower->Follower, For T2->T2
011369 T0002 LOG2 S2 <- S0, append (1, 2]
011370 T0002 DBUG S0 Match after sort: [1 2 2], majority[1]=2
011370 T0002 APLY S0 Leader update the commit 1->2
011370 T0002 APLY S0 Apply log for [2, 2]
012879 T0002 VOTE S1 -> become Candidate
013374 T0002 LOG1 S2 Follower->Follower, For T2->T2
013374 T0002 LOG2 S2 <- S0, append (2, 2]
013374 T0002 APLY S2 Follower accept log: (1,2]
013375 T0002 DBUG S0 Match after sort: [1 2 2], majority[1]=2
013375 T0002 APLY S2 Apply log for [2, 2]
013488 T0002 LEAD S0 Leader accept log [3]T2
014109 T0003 VOTE S1 -> become Candidate
014586 T0004 DBUG S1 Ask vote from S2, Lost or Error
015183 T0004 VOTE S1 -> become Candidate
015393 T0002 LOG1 S2 Follower->Follower, For T2->T2
015393 T0002 LOG2 S2 <- S0, append (2, 3]
015394 T0002 DBUG S0 Match after sort: [1 3 3], majority[1]=3
015394 T0002 APLY S0 Leader update the commit 2->3
015394 T0002 APLY S0 Apply log for [3, 3]
015423 T0005 DBUG S1 Ask vote from S2, Lost or Error
017405 T0002 LOG1 S2 Follower->Follower, For T2->T2
017405 T0002 LOG2 S2 <- S0, append (3, 3]
017406 T0002 APLY S2 Follower accept log: (2,3]
017406 T0002 APLY S2 Apply log for [3, 3]
017407 T0002 DBUG S0 Match after sort: [1 3 3], majority[1]=3
018563 T0005 VOTE S1 -> become Candidate
019421 T0002 LOG1 S2 Follower->Follower, For T2->T2
019421 T0002 LOG2 S2 <- S0, append (3, 3]
019422 T0002 DBUG S0 Match after sort: [1 3 3], majority[1]=3
021229 T0006 VOTE S1 -> become Candidate
021431 T0002 LOG1 S2 Follower->Follower, For T2->T2
021431 T0002 LOG2 S2 <- S0, append (3, 3]
021432 T0002 DBUG S0 Match after sort: [1 3 3], majority[1]=3
022331 T0002 VOTE S0 ->S1, sendApeendEntries Fail
022980 T0007 VOTE S1 -> become Candidate
023151 T0008 DBUG S1 Ask vote from S0, Lost or Error
023433 T0002 LOG1 S2 Follower->Follower, For T2->T2
023433 T0002 LOG2 S2 <- S0, append (3, 3]
023434 T0002 DBUG S0 Match after sort: [1 3 3], majority[1]=3
025001 T0008 VOTE S1 -> become Candidate
025451 T0002 LOG1 S2 Follower->Follower, For T2->T2
025451 T0002 LOG2 S2 <- S0, append (3, 3]
025452 T0002 DBUG S0 Match after sort: [1 3 3], majority[1]=3
026310 T0009 VOTE S1 -> become Candidate
027466 T0002 LOG1 S2 Follower->Follower, For T2->T2
027466 T0002 LOG2 S2 <- S0, append (3, 3]
027467 T0002 DBUG S0 Match after sort: [1 3 3], majority[1]=3
027545 T0002 LEAD S0 Leader accept log [4]T2
028351 T0002 VOTE S0 ->S1, sendApeendEntries Fail
028403 T0010 VOTE S1 -> become Candidate
028944 T0011 VOTE S1 -> become Candidate
029054 T0012 DBUG S1 Ask vote from S0, Lost or Error
029487 T0002 LOG1 S2 Follower->Follower, For T2->T2
029487 T0002 LOG2 S2 <- S0, append (3, 4]
029487 T0002 DBUG S0 Match after sort: [1 4 4], majority[1]=4
029487 T0002 APLY S0 Leader update the commit 3->4
029487 T0002 APLY S0 Apply log for [4, 4]
029651 T0012 VOTE S1 -> become Candidate
029863 T0013 DBUG S1 Ask vote from S2, Lost or Error
030936 T0013 DBUG S1 Ask vote from S0, Lost or Error
030973 T0013 VOTE S1 -> become Candidate
031504 T0002 LOG1 S2 Follower->Follower, For T2->T2
031504 T0002 LOG2 S2 <- S0, append (4, 4]
031504 T0002 APLY S2 Follower accept log: (3,4]
031505 T0002 DBUG S0 Match after sort: [1 4 4], majority[1]=4
031506 T0002 APLY S2 Apply log for [4, 4]
031550 T0002 LEAD S0 Leader accept log [5]T2
033512 T0002 LOG1 S2 Follower->Follower, For T2->T2
033513 T0002 LOG2 S2 <- S0, append (4, 5]
033513 T0002 DBUG S0 Match after sort: [1 5 5], majority[1]=5
033513 T0002 APLY S0 Leader update the commit 4->5
033513 T0002 APLY S0 Apply log for [5, 5]
034223 T0014 VOTE S1 -> become Candidate
035422 T0015 VOTE S1 -> become Candidate
035514 T0002 LOG1 S2 Follower->Follower, For T2->T2
035514 T0002 LOG2 S2 <- S0, append (5, 5]
035514 T0002 APLY S2 Follower accept log: (4,5]
035516 T0002 DBUG S0 Match after sort: [1 5 5], majority[1]=5
035516 T0002 APLY S2 Apply log for [5, 5]
035732 T0002 LEAD S0 Leader accept log [6]T2
036582 T0016 VOTE S1 -> become Candidate
036583 T0002 LOG1 S2 Follower->Follower, For T2->T17
036584 T0017 VOTE S2 ->S1, Reject, Candidate is less update
036584 T0002 LOG1 S0 Leader->Follower, For T2->T17
036584 T0017 VOTE S0 ->S1, Reject, Candidate is less update
037520 T0017 VOTE S0 Lost Leader [0] to Follower[T17]
038221 T0017 VOTE S1 -> become Candidate
038224 T0017 LOG1 S0 Follower->Follower, For T17->T18
038224 T0018 VOTE S0 ->S1, Reject, Candidate is less update
038224 T0017 LOG1 S2 Follower->Follower, For T17->T18
038224 T0018 VOTE S2 ->S1, Reject, Candidate is less update
039272 T0018 VOTE S0 -> become Candidate
039275 T0018 LOG1 S2 Follower->Follower, For T18->T19
039275 T0019 VOTE S2 -> S0, Vote granted
039275 T0019 LOG1 S0 become Leader T19
039277 T0019 LOG1 S2 Follower->Follower, For T19->T19
039277 T0019 LOG2 S2 <- S0, Reject log, Follower'log too short
039277 T0019 LOG1 S0 ->S2 not match at 6, try next=1
039278 T0018 LOG1 S1 Candidate->Follower, For T18->T19
039278 T0019 VOTE S1 -> S0, Vote granted
039278 T0019 VOTE S0 Lost Context, abort voteRequest from S1
039279 T0019 LOG1 S1 Follower->Follower, For T19->T19
039279 T0019 LOG2 S1 <- S0, Reject log, Follower'log too short
039279 T0019 LOG1 S0 ->S1 not match at 6, try next=1
041285 T0019 LOG1 S2 Follower->Follower, For T19->T19
041286 T0019 LOG1 S1 Follower->Follower, For T19->T19
041286 T0019 LOG2 S2 <- S0, append (0, 6]
041286 T0019 LOG2 S1 <- S0, append (0, 6]
041286 T0019 APLY S1 Follower accept log: (1,5]
041286 T0019 DBUG S0 Match after sort: [0 6 6], majority[1]=6
041286 T0019 APLY S0 Leader update the commit 5->6
041286 T0019 APLY S0 Apply log for [6, 6]
041286 T0019 APLY S1 Apply log for [2, 5]
041286 T0019 DBUG S0 Match after sort: [6 6 6], majority[1]=6
043293 T0019 LOG1 S1 Follower->Follower, For T19->T19
043293 T0019 LOG2 S1 <- S0, append (6, 6]
043293 T0019 APLY S1 Follower accept log: (5,6]
043294 T0019 DBUG S0 Match after sort: [6 6 6], majority[1]=6
043294 T0019 APLY S1 Apply log for [6, 6]
043295 T0019 LOG1 S2 Follower->Follower, For T19->T19
043295 T0019 LOG2 S2 <- S0, append (6, 6]
043295 T0019 APLY S2 Follower accept log: (5,6]
043296 T0019 DBUG S0 Match after sort: [6 6 6], majority[1]=6
043296 T0019 APLY S2 Apply log for [6, 6]
045301 T0019 LOG1 S2 Follower->Follower, For T19->T19
045302 T0019 LOG2 S2 <- S0, append (6, 6]
045302 T0019 LOG1 S1 Follower->Follower, For T19->T19
045302 T0019 LOG2 S1 <- S0, append (6, 6]
045303 T0019 DBUG S0 Match after sort: [6 6 6], majority[1]=6
045303 T0019 DBUG S0 Match after sort: [6 6 6], majority[1]=6
047321 T0019 LOG1 S2 Follower->Follower, For T19->T19
047322 T0019 LOG1 S1 Follower->Follower, For T19->T19
047322 T0019 LOG2 S2 <- S0, append (6, 6]
047322 T0019 LOG2 S1 <- S0, append (6, 6]
047322 T0019 DBUG S0 Match after sort: [6 6 6], majority[1]=6
047322 T0019 DBUG S0 Match after sort: [6 6 6], majority[1]=6
047788 T0019 DBUG S1 Ask vote from S2, Lost or Error
048349 T0019 VOTE S0 ->S1, sendApeendEntries Fail
049322 T0019 LOG1 S2 Follower->Follower, For T19->T19
049322 T0019 LOG2 S2 <- S0, append (6, 6]
049323 T0019 DBUG S0 Match after sort: [6 6 6], majority[1]=6
049323 T0019 LOG1 S1 Follower->Follower, For T19->T19
049323 T0019 LOG2 S1 <- S0, append (6, 6]
049324 T0019 DBUG S0 Match after sort: [6 6 6], majority[1]=6
051229 T0019 VOTE S0 ->S1, sendApeendEntries Fail
051328 T0019 LOG1 S1 Follower->Follower, For T19->T19
051328 T0019 LOG2 S1 <- S0, append (6, 6]
051328 T0019 LOG1 S2 Follower->Follower, For T19->T19
051328 T0019 LOG2 S2 <- S0, append (6, 6]
051329 T0019 DBUG S0 Match after sort: [6 6 6], majority[1]=6
051329 T0019 DBUG S0 Match after sort: [6 6 6], majority[1]=6
051670 T0019 DBUG S1 Ask vote from S0, Lost or Error
053311 T0019 LEAD S0 Leader accept log [7]T19
053330 T0019 LOG1 S2 Follower->Follower, For T19->T19
053330 T0019 LOG2 S2 <- S0, append (6, 7]
053331 T0019 DBUG S0 Match after sort: [6 7 7], majority[1]=7
053331 T0019 APLY S0 Leader update the commit 6->7
053331 T0019 LOG1 S1 Follower->Follower, For T19->T19
053331 T0019 APLY S0 Apply log for [7, 7]
053331 T0019 LOG2 S1 <- S0, append (6, 7]
053332 T0019 DBUG S0 Match after sort: [7 7 7], majority[1]=7
053750 T0019 DBUG S1 Ask vote from S2, Lost or Error
055344 T0019 DBUG S1 Ask vote from S2, Lost or Error
055346 T0019 LOG1 S1 Follower->Follower, For T19->T19
055346 T0019 LOG2 S1 <- S0, append (7, 7]
055346 T0019 APLY S1 Follower accept log: (6,7]
055346 T0019 LOG1 S2 Follower->Follower, For T19->T19
055346 T0019 LOG2 S2 <- S0, append (7, 7]
055346 T0019 APLY S2 Follower accept log: (6,7]
055347 T0019 APLY S2 Apply log for [7, 7]
055347 T0019 APLY S1 Apply log for [7, 7]
055347 T0019 DBUG S0 Match after sort: [7 7 7], majority[1]=7
055347 T0019 DBUG S0 Match after sort: [7 7 7], majority[1]=7
  ... Passed --   5.5  3   96   20226    7
PASS
ok  	course/raft	5.548s
